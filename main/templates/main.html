{% extends 'base.html' %} 
{% load static %}

{% block content %}
<style>
     .data{
        font-family: 'Mochiy Pop P One';
    } 
</style>

{% include 'navbar.html' %}

<div class="">
    <div class="flex flex-col justify-center text-center pt-5">
        <div class="flex justify-center w-100 h-50 pt-10">
            <h1 class="px-60 py-2 text-6xl border-4 rounded-xl" style="background-color: #DBBC7F; color: #FEFADD; -webkit-text-stroke: 2px #724E2B; font-family: 'Darumadrop One'; border-color: #724E2B;">About us</h1>
        </div>
        <p class="data text-center text-4xl px-80 pt-10 leading-10" style="color: #724E2B;">
            Tales and Tails Cafe adalah sebuah Cafe yang mengambil 
            konsep Cat Cafe, tetapi memiliki sebuah perpustakaan untuk meminjam buku juga. 
            Cafe ini memiliki tujuan untuk memadukan suasana santai kafe dengan kemudahan akses ke 
            koleksi buku yang beragam, hal ini bertujuan untuk menciptakan ruang yang menggabungkan dua 
            kegiatan yang menyenangkan dan mendidik.
        </p>
        <div class="pt-20 py-60" style="display: flex; justify-content: center; align-items: center;">
            <div class="flex border-4 rounded-xl justify-center pt-10" style="background-color: #FEFADD; font-family: 'Darumadrop One'; border-color: #724E2B; width: 800px; height: 700px;">
                <div class="flex flex-col">
                    <h1 class="data py-2 text-6xl text-slate-900">DISCOVER BOOKS</h1>
                    <h2 class="data py-2 text-2xl text-amber-700">Just one click away!</h2>
                    <div id="data_books" class="flex flex-wrap justify-center py-5 px-4 grow-0 w-100" >

                    </div>
                    <button class="bg-orange-700 border-4 border-yellow-900 rounded-md">
                        <a href="{% url 'catalog:catalog' %}" class="text-2xl text-white py-4"  href="">See More</a>
                    </button>
                </div>
               

            </div>
                
        </div>  
    </div>
    
   
</div>

<script>
    async function getProducts() {
    return fetch("{% url 'main:get_books_json_preview' %}").then((res) => res.json())
}

async function refreshProducts(){
    const product = await getProducts()
    document.getElementById("data_books").innerHTML = ""
    let htmlString = ""
    product.forEach((item) => {
        htmlString += `<div class="relative px-2 flex flex-col rounded-lg shadow-md w-100 m-6 overflow-hidden text-center border-4 border-yellow-900" style="background-color: #FEFADD;">
        
        <div class=" px-20 pt-4">
            <img src="${item.fields.image_link}" alt="no image">
        </div>
        <div>
            <div class= "data pr-1 pt-2 tag">
                <h1 class="truncate">${item.fields.title}</h1>
            
            </div>
            <p class=" data pt-3 text-sm pb-2">Stock: <span class="ml-2">1</span></p>
        
        <div class="w-full pb-2">
            <button class="data text-yellow-900 w-40 border-4 border-yellow-900 rounded" onclick="detailsProduct('${item.fields.image_link}',
                '${item.fields.title.replace(/'/g, "\\'").replace(/"/g, '&quot;')}', 
                '${item.fields.description.replace(/'/g, "\\'").replace(/"/g, '&quot;')}', 
                '${item.fields.author.replace(/'/g, "\\'").replace(/"/g, '&quot;')}', 
                '${item.fields.date_published.replace(/'/g, "\\'").replace(/"/g, '&quot;')}',
                '${item.fields.rating.replace(/'/g, "\\'").replace(/"/g, '&quot;')}', 
                '${item.fields.category.replace(/'/g, "\\'").replace(/"/g, '&quot;')}',
                '${item.pk}')">
                Details
            </button>
        </div>
        
        </div>
    </div>      
   
`
    })
    document.getElementById("data_books").innerHTML = htmlString
}

refreshProducts()
</script>

{% endblock %}